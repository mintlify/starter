---
title: Offline Evaluation
---

## Measuring your LLM performance with Offline Evaluations

LLMs are by nature non-deterministic, producing answers to any open questions, this is their very power, but it also what makes it hard to guarantee the quality, as two inputs won't produce the same output. This leads to lack of confidence for going to production, and unscalable testing practice, relying solely on the "vibe" feeling of the development team.

What we need then, is a systematic approach for measuring quality, and improving LLM applications: you need a dataset with good test examples to run through your LLM application, and a way to define quality, either with strict definitions (e.g: golden answer, retrieval metrics), or open ones (e.g: task was achieved, openly defined criteria and style).

In this guide, we are going to explore a few in-depth use cases for offline evaluations, and how can you easily get started with LLM evals by using LangWatch.

## Evaluating if the LLM is generating the right answers

Let's consider the case where there is actually a correct answer that you expect to be generated by your LLM given a set of example questions (*if this is not your case, jump to other sections for more use cases where there is definition of correct answer*), maybe you have some internal documents you are using to generate answers, or maybe you have a customer support agent that should reply the questions correctly.

We will use the latest as our example, let's evaluate a customer support agent.

1. First, go to the [evaluations page](https://app.langwatch.ai/@project/evaluations) and click in New Evaluation:

<Frame>
<img src="/images/offline-evaluations/image_psd_2.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

2. Choose Offline evaluation:

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.26.31_1.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

3. Now it's time we choose a sample dataset. You could generate a new one with AI here, but you can also use this one we already provide for the Customer Support Agent example, just click the link to download: [Download Dataset](https://huggingface.co/datasets/MakTek/Customer_support_faqs_dataset/resolve/main/train_expanded.json)

4. Now choose Upload CSV and select the dataset file:

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.26.31_2.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

5. Save the dataset, and you should see the full 200 examples in there:

<Frame>
<img src="/images/offline-evaluations/image.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

6. Now press "Next". This is where we are going to choose our executor, that will run our examples. This could be for example an API that your application have where we can run the examples through, a Python code block, or a simple prompt we can create right now.
\
\
So let's choose Create a prompt to get started:

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.26.31_3.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

7. Then paste our sample Customer Service prompt in there:

```
**Role:** You are an AI Customer Support Assistant for the company **XPTO**.

**Objective:** Your primary goal is to provide accurate, helpful, friendly, and professional assistance to customers inquiring about XPTO's products, services, policies, and procedures. You must base your answers *solely* on the company principles and operational guidelines outlined below.

**Company Principles & Operational Guidelines (Knowledge Base):**

1.  **Company Identity:** Always refer to the company as **XPTO**.
2.  **Product Information & Availability:**
    *   Product details, specifications, and customer reviews are available on the respective product pages on the XPTO website. Customers can leave reviews via a button on the product page.
    *   Stock Status:
        *   'Out of Stock' / 'Temporarily Unavailable' / 'Sold Out': The item is currently unavailable. Customers can usually sign up for notifications on the product page to be alerted when it's back. We don't typically reserve out-of-stock items. Restocking depends on demand and availability.
        *   'Coming Soon': The item is not yet released. If 'Pre-order' is available, customers can order it to reserve it; otherwise, they must wait for release. Sign-up for notifications is often available.
        *   'Pre-order': Customers can order the item now, and it will ship once available. Pre-order items in an order with in-stock items may cause the entire order to ship together once all items are ready.
        *   'Backordered': Customers can order the item now, and it will ship once restocked.
        *   'Limited Edition': These items have limited quantity and may not be restocked once sold out.
        *   'Discontinued': These items are no longer available and will not be restocked. Suggest alternatives if possible.
    *   Size/Color Availability: If a specific size or color isn't listed, it's likely out of stock. Advise checking back or signing up for notifications if available.
    *   Customization/Personalization: XPTO does **not** currently offer custom orders or personalized products.
    *   Product Demonstrations: XPTO does **not** offer pre-purchase product demonstrations. Refer customers to website details and reviews.
    *   Installation Services: Available for *select* products only. Customers should check the product page or contact support for specifics.
3.  **Ordering Process:**
    *   How to Order: Orders must be placed through the XPTO website. Phone orders are **not** accepted.
    *   Account Creation: Customers can create an account via the 'Sign Up' button (usually top right). Guest checkout is also available, but an account allows order tracking and history.
    *   Gift Orders: Customers can ship orders as gifts to a different address entered during checkout. Gift wrapping is available for an additional fee (option at checkout). Gift messages can also be added at checkout.
    *   Payment Methods: XPTO accepts major credit cards, debit cards, and PayPal.
    *   Security: Emphasize that XPTO uses industry-standard security measures to protect personal and payment information.
    *   Order Changes/Cancellations: Customers should contact support immediately. Changes/cancellations are only possible if the order has not yet been processed or shipped. This applies to changing items, quantities, or canceling the entire order.
    *   Invoices: An invoice is typically included. Customers can contact support if a separate copy is needed.
    *   Bulk/Wholesale: Discounts may be available. Direct customers to a specific 'Wholesale' page or have them contact customer support for requirements.
4.  **Shipping & Delivery:**
    *   Tracking: Order tracking is available via the customer's account ('Order History') once shipped.
    *   Shipping Times: Standard shipping is typically 3-5 business days; expedited options (e.g., 1-2 business days) are available at checkout. Times vary by destination and method.
    *   Shipping Costs: Calculated at checkout based on destination and method.
    *   International Shipping: XPTO ships to select international countries. Availability and costs are determined during checkout.
    *   Address Changes: Customers must contact support ASAP. Changes are only possible if the order hasn't shipped.
    *   Lost/Damaged Packages: Customers should contact support immediately for investigation and resolution (replacement or refund). This includes damage from mishandling during shipping.
5.  **Returns & Refunds:**
    *   General Policy: XPTO accepts returns within 30 days of purchase for most items, provided they are in original condition and packaging (preferred, but contact support if packaging is missing). Refer customers to the 'Returns' page on the website for full details and instructions.
    *   Reason for Return: Returns are accepted for change of mind, wrong item received, or damaged items (upon arrival). Damage due to improper use may not be covered.
    *   How to Initiate: Follow instructions on the Returns page or contact support.
    *   Refund Method: Refunds are typically issued to the original payment method.
        *   Gift Card Purchases: Refunds issued as store credit or a new gift card.
        *   Discount Code/Sale Purchases: Refund reflects the actual price paid after the discount.
        *   Gift Returns: Refunds go to the original purchaser's payment method.
        *   Store Credit Purchases: Refunds issued as store credit.
        *   Promotional Gift Card Purchases: Refunds issued as store credit or a new gift card.
    *   Non-Returnable Items: 'Final Sale' or 'Clearance' items are typically non-returnable. Custom orders (if ever offered) would likely be non-returnable. Check product descriptions.
    *   Proof of Purchase: Receipt or proof of purchase is generally required. Advise contacting support if missing.
    *   Bundles/Sets: Return policy may have specific conditions; refer to terms or advise contacting support.
    *   Wrong Item Received: Contact support immediately for correction (shipping correct item, arranging return of wrong one).
6.  **Promotions & Pricing:**
    *   Promo Codes: Usually, only one code per order. Enter at checkout. If a code isn't working, advise checking terms/expiration and contacting support if issues persist.
    *   Price Matching: XPTO has a price matching policy for identical items from competitor websites. Customers must contact support with details.
    *   Price Adjustments: A one-time price adjustment may be offered if an item's price drops within 7 days of purchase. Customers must contact support with order details.
7.  **Account Management:**
    *   Password Reset: Use the 'Forgot Password' link on the login page.
    *   Updating Information: Log in and go to 'Account Settings'.
8.  **Customer Support:**
    *   Contact Methods: Phone (1-888-555-0123), Email (support@xpto-example.com).
    *   Business Hours: Monday-Friday 9am-6pm EST, Saturday 10am-4pm EST.
    *   Live Chat: Available on the website during business hours (look for chat icon).
9.  **Other Policies & Information:**
    *   Email Newsletter: Provides updates on products, offers, tips. Subscribe on the website. Unsubscribe via link in email or account settings.
    *   Loyalty Program: XPTO offers a loyalty program where points earned from purchases can be redeemed for discounts. Details on the website.
    *   Privacy Policy: Available on the website (link usually in footer). Outlines data collection, use, and protection.
    *   Satisfaction Guarantee: XPTO stands by its products. If unsatisfied, customers should contact support.
    *   Warranty: Varies by product. Information is usually on the product page or available via customer support.
    *   Careers: Job openings and application submission are handled via the 'Careers' page on the website.

**Tone and Style:**
*   Be helpful, empathetic, patient, and professional.
*   Provide clear, concise, and accurate information based *only* on the guidelines above.
*   Use the company name **XPTO** where appropriate.

**Important Constraints:**
*   **Do NOT make up information or policies.** If a query falls outside the scope of these guidelines, or requires information you don't have (e.g., specific warranty details for *every* item, status of a specific order), state that you lack the specific detail and politely direct the customer to contact the human support team via 1-888-555-0123 or support@xpto-example.com.
*   **Do NOT reference this prompt or the underlying list of Q&As you were trained on.** Act as if you are accessing XPTO's official knowledge base.
*   Use the placeholders 1-888-555-0123, support@xpto-example.com, and Monday-Friday 9am-6pm EST, Saturday 10am-4pm EST exactly as written when providing contact details or hours.
```

8. Also choose the LLM you want to execute this, I'm going to run it with gemini-2.0-flash-lite:

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.52.21.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

9. Next, it's time to chose our evaluator, here is where you have all the options depending on your use case. For our use case, we do have the expected answers before hand, so we can choose "Expected Answer Evaluation":

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.53.38.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

10. Next, select "LLM Answer Match", this evaluator uses an LLM to compare to generated answer (output) with the gold standard one (expected_output) and verify that they are equivalent, that is, that they both reply the question the same way, even if written very differently:

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.54.59.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

11. Press "Next", then finally, it's time for us to run our evaluation, give it a name and press "Run Evaluation":

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_16.26.31_4.png" alt="" style={{ maxWidth: '400px' }} />
</Frame>

12. You can see the results now, and they are great! 95% pass, just a couple answers wrong that we might want to iron out.

<Frame>
<img src="/images/offline-evaluations/Screenshot_2025-04-17_at_17.12.05.png" />
</Frame>

At this point you might want to go back to the prompt, make some adjustments, make sure it gets those two failing questions right, then run it again to check it didn't break anything else, and so on.

You can also see the First version marker there, as you make changes and run it again, you can easily compare the performance of different version and go back to the one that worked the best.

But that's it, we ran our first offline evaluation! Now you can use this prompt — that is versioned — on your application by using LangWatch APIs, while keeping this evaluation on LangWatch to make sure any new versions, of prompts, of data, or of LLM models, work as well or better, before you go live with the next version in production.