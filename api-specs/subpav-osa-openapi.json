{"openapi":"3.1.0","info":{"title":"API SMS SubPAV OSA","description":"API para consulta de informacoes de unidades de saude e notificacoes de risco","version":"1.0.0"},"servers":[{"url":"https://services.staging.app.dados.rio/subpav-osa-api/","description":"Servidor de Staging"}],"paths":{"/unidade/{cnes}":{"get":{"tags":["Unidades"],"summary":"Obter informacoes da unidade","description":"Retorna informacoes detalhadas de uma unidade de saude pelo codigo CNES","operationId":"get_informacao_unidade_unidade__cnes__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cnes","in":"path","required":true,"schema":{"type":"string","description":"Codigo CNES da unidade de saude","title":"Cnes"},"description":"Codigo CNES da unidade de saude","example":"2269311"}],"responses":{"200":{"description":"Informacoes da unidade retornadas com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Unidade"}}}},"404":{"description":"Unidade nao encontrada","content":{"application/json":{"example":{"detail":"Unidade nao encontrada"}}}},"401":{"description":"Token de acesso invalido ou ausente","content":{"application/json":{"example":{"detail":"Token invalido"}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"example":{"detail":"Erro interno do servidor"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/unidade/{cnes}/risco":{"get":{"tags":["Notificacoes"],"summary":"Obter nivel de risco da unidade","description":"Retorna informacoes sobre o nivel de risco atual e historico de notificacoes de uma unidade","operationId":"get_risco_unidade_unidade__cnes__risco_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cnes","in":"path","required":true,"schema":{"type":"string","description":"Codigo CNES da unidade de saude","title":"Cnes"},"description":"Codigo CNES da unidade de saude","example":"2269311"}],"responses":{"200":{"description":"Informacoes de risco retornadas com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Acesso"}}}},"401":{"description":"Token de acesso invalido ou ausente","content":{"application/json":{"example":{"detail":"Token invalido"}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"example":{"detail":"Erro interno do servidor"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Acesso":{"properties":{"cnes":{"type":"string","title":"Cnes","description":"Codigo Nacional de Estabelecimentos de Saude","example":"2269311"},"notificacao_ativa":{"anyOf":[{"$ref":"#/components/schemas/Notificacao"},{"type":"null"}],"description":"Notificacao de risco atualmente ativa para a unidade"},"ultima_notificacao":{"anyOf":[{"$ref":"#/components/schemas/Notificacao"},{"type":"null"}],"description":"Ultima notificacao registrada para a unidade"}},"type":"object","required":["cnes"],"title":"Acesso","description":"Modelo para representar informacoes de acesso e risco de uma unidade"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Horario":{"properties":{"inicio":{"type":"integer","maximum":23.0,"minimum":0.0,"title":"Inicio","description":"Horario de abertura em formato de hora (0-23)","example":8},"fim":{"type":"integer","maximum":23.0,"minimum":0.0,"title":"Fim","description":"Horario de fechamento em formato de hora (0-23)","example":17}},"type":"object","required":["inicio","fim"],"title":"Horario","description":"Modelo para representar horario de funcionamento"},"Notificacao":{"properties":{"risco":{"type":"string","enum":["Verde","Amarelo","Laranja","Vermelho"],"title":"Risco","description":"Nivel de risco da notificacao","example":"Verde"},"status":{"type":"string","enum":["Ativo","Encerrado"],"title":"Status","description":"Status atual da notificacao","example":"Ativo"},"ultima_atualizacao":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ultima Atualizacao","description":"Data e hora da ultima atualizacao da notificacao","example":"2024-01-15T10:30:00-03:00"}},"type":"object","required":["risco","status"],"title":"Notificacao","description":"Modelo para representar uma notificacao de risco"},"Unidade":{"properties":{"cnes":{"type":"string","title":"Cnes","description":"Codigo Nacional de Estabelecimentos de Saude","example":"2269311"},"nome":{"type":"string","title":"Nome","description":"Nome da unidade de saude","example":"UBS Exemplo"},"logradouro":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logradouro","description":"Endereco da unidade","example":"Rua das Flores"},"numero":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Numero","description":"Numero do endereco","example":"123"},"complemento":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Complemento","description":"Complemento do endereco","example":"Sala 101"},"cep":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cep","description":"CEP da unidade","example":"20000-000"},"telefone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Telefone","description":"Telefone fixo da unidade","example":"(21) 1234-5678"},"celular":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Celular","description":"Telefone celular da unidade","example":"(21) 98765-4321"},"funcionamento_dia_util":{"$ref":"#/components/schemas/Horario","description":"Horario de funcionamento em dias uteis"},"funcionamento_sabado":{"anyOf":[{"$ref":"#/components/schemas/Horario"},{"type":"null"}],"description":"Horario de funcionamento aos sabados"}},"type":"object","required":["cnes","nome","funcionamento_dia_util"],"title":"Unidade","description":"Modelo para representar uma unidade de saude"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}